{% if request.path contains "qr_landing" %}
<style>
  /* General Styling */
  .qr-container {
    max-width: 400px;
    margin: 0 auto;
    text-align: center;
    font-family: 'Montserrat', sans-serif;
    display: none; /* Apenas a etapa ativa será exibida */
  }

  .qr-container.active {
    display: block; /* Exibe a etapa ativa */
  }

  h2 {
    font-weight: 700;
    font-style: italic;
    letter-spacing: 0.5px;
    color: #000;
    margin-bottom: 10px;
  }

  p {
    font-size: 16px;
    color: #555;
    line-height: 1.5;
    margin: 10px 0 20px;
  }

  .button {
    display: block;
    font-size: 16px;
    font-weight: bold;
    padding: 12px 0;
    margin: 10px auto;
    width: 260px;
    background-color: #000;
    color: #fff;
    text-align: center;
    border-radius: 5px;
    border: none;
    cursor: pointer;
  }

  .button--secondary {
    background-color: #fff;
    color: #000;
  }

  .progress-text {
    font-size: 16px;
    font-weight: bold;
    color: #555;
    margin-top: 20px;
    text-align: center;
  }

  .surprise-box {
    margin: 20px auto;
    display: flex;
    justify-content: center;
  }

  .surprise-box dotlottie-player {
    width: 200px;
    height: 200px;
  }

  .claim-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: 20px 0;
  }

  .claim-wrapper img {
    width: 80px;
    margin-right: 20px;
  }
</style>

<!-- Etapa 1 -->
<div id="qr-step-1" class="qr-container active">
  <div class="qr-congrats">
    <h2>Congrats!</h2>
    <p>You're about to earn $20 with your new token.</p>
    <p>Let's get started! First, you need to log into your Larroudé account.</p>
    <div class="actions">
      <a href="#" class="btn-login button" onclick="showStep(2)">LOGIN</a>
      <a href="/account/register" class="btn-create-account button button--secondary">CREATE ACCOUNT</a>
    </div>
    <p class="additional-text">*If you don’t have an account, that’s ok! <br>We’ll wait while you create one. ;)</p>
    <div class="surprise-box">
      <dotlottie-player 
        src="https://lottie.host/4780ff13-324d-48d5-9129-ebe8ecf4a8ea/ZWm1cedUXY.lottie" 
        background="transparent" 
        speed="1" 
        loop autoplay>
      </dotlottie-player>
    </div>
  </div>
  <div class="progress-text">1/4</div>
</div>

<!-- Etapa 2 -->
<div id="qr-step-2" class="qr-container">
  <h2>Login</h2>
  <p>Enter your email and password to log in. You're one step away from your $20!</p>
  <a href="#" class="button" onclick="showStep(3)">CONTINUE</a>
  <div class="progress-text">2/4</div>
</div>

<!-- Etapa 3 -->
<div id="qr-step-3" class="qr-container">
  {% if customer %}
  <h2>Claim your token, {{ customer.first_name | capitalize }}!</h2>
  <p>
    Text explaining how the credits work. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
  </p>
  <p><strong>Your credits will be valid for <span style="color: #000;">180 days</span> starting today!</strong></p>
  <div class="claim-wrapper">
    <img src="{{ product.featured_image | img_url: '300x' }}" alt="{{ product.title }}">
    <button type="button" class="button qr_claim" onclick="showStep(4)">CLAIM $20</button>
  </div>
  {% else %}
  <h2>Please Login to Claim Your Token!</h2>
  <p>Log into your account or create a new one to proceed.</p>
  <a href="/account/login" class="button">LOGIN</a>
  <a href="/account/register" class="button button--secondary">CREATE ACCOUNT</a>
  {% endif %}
  <div class="progress-text">3/4</div>
</div>

<!-- Etapa 4 -->
<div id="qr-step-4" class="qr-container">
  <h2>Congrats, {{ customer.first_name | capitalize }}!</h2>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
  <button class="button" onclick="alert('QR Shared!')">SHARE YOUR QR</button>
  <button class="button" onclick="window.location.href='https://larroude.com/collections/new-best-sellers'">SHOP BEST SELLERS</button>
  <p>Want to know more about The Token? <a href="https://larroude.com/pages/the-qr-code">Learn more</a></p>
  <div class="progress-text">4/4</div>
</div>

<script>
  // Função para alternar entre etapas (step-by-step)
  function showStep(step) {
    // Ocultar todas as etapas
    document.querySelectorAll('.qr-container').forEach(container => container.classList.remove('active'));
    // Mostrar a etapa atual
    document.getElementById(`qr-step-${step}`).classList.add('active');
  }
</script>

<script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
{% endif %}

{% schema %}
{
  "name": "Teste final",
  "target": "section",
  "javascript": "script.js",
  "settings": []
}
{% endschema %}
